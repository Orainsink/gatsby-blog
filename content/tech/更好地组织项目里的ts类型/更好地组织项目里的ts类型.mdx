---
categories: tech
description: nodejs或react项目实践中的一些 ts 经验总结
date: 2023-01-09 15:22:23
title: 更好地组织项目里的ts类型
tags: [ts, 架构, 规范]
---

## Global types

全局类型放在`d.ts`文件里，可以在项目内不通过引入即可生效。非常方便，但他有两个问题：

1. 污染全局类型空间
2. 文件大小容易随迭代逐渐膨胀到无法维护

全局生效的东西会带来额外的心智负担，这是一个简单的逻辑，当我知道我的改动只影响我的业务的时候，我可以修改得很惬意，但是如果这个东西会全局生效，我就会开始担心：

1. 我的修改会不会影响到别人或后续迭代
2. 我在修改之前，要不要先读懂别人的代码

随着项目迭代时间的拉长以及项目人员的更换，全局类型不可避免地会偏离最开始建立这个文件的人的想法，甚至烂掉。

所以我并不建议使用`d.ts`

对我来说，我只会使用唯一的`global.d.ts`，用来通过`declear`来声明一些环境声明，解决 ts 和 js 混用或 ts 对一些文件后缀报错的问题。一些工具 repo 的全局类型可以使用 namespace 来避免一些全局污染，但仍旧不建议使用全局类型。

## React 组件类型

### FC or ReactElement / JSX.Element

### 父子组件类型

### HOC 注入类型

### ref 类型

## Base 类型的应用

## 常量的 as const

## 为什么要少用 enum

## 类型要反应真实的数据结构

## 类型的粒度

## 类型收敛

## 前后端同构，graphql TypeGen 类型的问题

## as 和 any，类型取舍
